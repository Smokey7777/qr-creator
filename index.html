<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QR Maker</title>
  <style>
    :root { color-scheme: dark; }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100vh; display: grid; place-items: center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: #0b0f14; color: #e5e7eb;
    }
    .card {
      width: min(560px, 94vw);
      background: #111827; border: 1px solid #1f2937; border-radius: 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35); padding: 18px;
    }
    h1 { margin: 0 0 8px 0; font-size: 18px; }
    p.hint { margin: 6px 0 14px; font-size: 12px; color: #9ca3af; }
    .row { display: flex; gap: 10px; }
    input[type=text] {
      flex: 1; padding: 10px 12px; border-radius: 10px;
      border: 1px solid #374151; background: #0f172a; color: #e5e7eb;
    }
    button {
      padding: 10px 14px; border: 0; border-radius: 10px;
      background: #2563eb; color: #fff; cursor: pointer;
    }
    .qr-wrap {
      display: grid; place-items: center; margin-top: 14px; padding: 12px;
      background: #0f172a; border: 1px dashed #293042; border-radius: 12px;
    }
    #qrcode canvas, #qrcode img {
      width: 256px; height: 256px; image-rendering: pixelated; border-radius: 8px;
      background: #ffffff;
    }
    .meta {
      margin-top: 10px; display: flex; justify-content: space-between; font-size: 12px; color: #9ca3af;
    }
    a { color: #93c5fd; text-decoration: none; }
  </style>
</head>
<body>
  <div class="card">
    <h1>QR Maker</h1>
    <p class="hint">Enter any text or URL. Press Generate. Download the PNG.</p>

    <div class="row">
      <input id="text" type="text" placeholder="https://example.com" autocomplete="off" />
      <button id="gen">Generate</button>
    </div>

    <div class="qr-wrap">
      <div id="qrcode" aria-label="QR code output"></div>
    </div>

    <div class="meta">
      <span id="status">Ready</span>
      <a id="download" download="qr.png" href="#">Download PNG</a>
    </div>
  </div>

  <!-- Local copy of qrcode.min.js -->
  <script src="qrcode.min.js"></script>
  <script>
    (function () {
      const $ = id => document.getElementById(id);
      const input = $("text");
      const genBtn = $("gen");
      const box = $("qrcode");
      const status = $("status");
      const dl = $("download");
      const SIZE = 256;

      function clearQR() {
        box.innerHTML = "";
        status.textContent = "Enter text";
        dl.removeAttribute("href");
      }

      function makeQR(text) {
        box.innerHTML = "";
        new QRCode(box, {
          text: text,
          width: SIZE,
          height: SIZE,
          colorDark: "#000000",
          colorLight: "#ffffff",
          correctLevel: QRCode.CorrectLevel.M
        });

        setTimeout(() => {
          const cvs = box.querySelector("canvas");
          if (cvs) {
            dl.href = cvs.toDataURL("image/png");
          } else {
            const img = box.querySelector("img");
            dl.href = img ? img.src : "#";
          }
          status.textContent = SIZE + "px â€¢ EC=M";
        }, 0);
      }

      function render() {
        const text = input.value.trim();
        if (!text) { clearQR(); return; }
        makeQR(text);
      }

      genBtn.addEventListener("click", render);
      input.addEventListener("keydown", e => { if (e.key === "Enter") render(); });
    })();
  </script>
</body>
</html>
